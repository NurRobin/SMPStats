# Changelog - Version 0.12.0

**Release Date:** 2025-11-27

## üéØ Summary

This release introduces **human-readable time range filters** for API endpoints, making it easier to query data for specific time periods like "last 6 hours", "today", or "this week" without calculating epoch timestamps.

---

## ‚ú® New Features

### Time Range Filters for API Endpoints

All time-based API endpoints now support human-readable time range parameters (`from`, `to`) alongside the existing epoch timestamp parameters (`since`, `until`).

#### Supported Formats

| Format | Example | Description |
|--------|---------|-------------|
| **Duration** | `6h`, `30m`, `3d`, `2w` | Relative duration from now |
| **Named Period** | `today`, `yesterday` | Specific day |
| **Named Period** | `this_week`, `last_week` | Week boundaries (Monday-based) |
| **Named Period** | `this_month`, `last_month` | Month boundaries |

#### Duration Units

- `s` - Seconds (e.g., `30s`)
- `m` - Minutes (e.g., `15m`)
- `h` - Hours (e.g., `6h`)
- `d` - Days (e.g., `3d`)
- `w` - Weeks (e.g., `2w`)

#### Example Usage

```bash
# Get heatmap data for the last 6 hours
GET /heatmap/MINING?from=6h

# Get moments from today only
GET /moments/recent?from=today

# Get this week's leaderboard
GET /timeline/leaderboard?from=this_week

# Get mining heatmap for a specific window
GET /heatmap/MINING?from=3d&to=yesterday
```

### Affected Endpoints

- `GET /heatmap/{type}` - New `from` and `to` parameters
- `GET /moments/recent` - New `from` parameter
- `GET /moments/query` - New `from` parameter
- `GET /moments/stream` - New `from` parameter
- `GET /timeline/range/{uuid}` - New `from` parameter
- `GET /timeline/leaderboard` - New `from` parameter

---

## üîß Technical Details

### New Classes

- **`TimeRangeParser`** (`de.nurrobin.smpstats.api.TimeRangeParser`)
  - Utility class for parsing human-readable time range strings
  - Supports duration formats (`6h`, `3d`, `2w`)
  - Supports named periods (`today`, `this_week`, `last_month`)
  - Falls back to epoch timestamp parsing for backwards compatibility
  - Configurable timezone support

---

## ‚¨ÜÔ∏è Migration Notes

### Backwards Compatibility

This is a **fully backwards-compatible** release:

- All existing `since`/`until` epoch timestamp parameters continue to work
- The `days` parameter on timeline endpoints still works
- If both new (`from`/`to`) and legacy parameters are provided, the new parameters take precedence

### No Action Required

No configuration changes, database migrations, or code changes are required to upgrade from 0.11.0.

---

## üìä Test Coverage

- 54 new unit tests for `TimeRangeParser`
- 6 integration tests for API handler time-range support
- All 460 existing tests pass

---

## üìñ Documentation

- Updated `docs/API.md` with new Time Range Filters section
- Added examples for all supported time range formats
- Documented backwards compatibility with legacy parameters
