# Changelog - Version 0.14.0

**Release Date:** 2025-11-28

## ğŸ¯ Summary

Adds new Timeline Delta, Death Replay, Moments History, and Achievement Badges GUIs - players can now compare their weekly progress ("This week vs last week"), review their death history with detailed information, browse their achievements/moments, and view earned badges with progress tracking.

---

## âœ¨ New Features

### Timeline Delta View GUI
- New "ğŸ“ˆ Weekly Progress" button in PlayerStatsGui (slot 51)
- Compare activity between this week (last 7 days) and last week (previous 7 days)
- Visual indicators for progress:
  - ğŸŸ¢ Green for improvements
  - ğŸ”´ Red for declines
  - ğŸŸ¡ Yellow for unchanged
- Comparison metrics include:
  - â± Playtime
  - âš” Total Kills
  - ğŸ’€ Deaths (lower is better)
  - ğŸ§± Blocks broken/placed
  - ğŸƒ Distance traveled
  - ğŸ”¨ Items crafted
  - ğŸ’¥ Damage dealt
  - ğŸ– Items consumed
- Summary panel showing overall progress verdict:
  - "ğŸ“ˆ Great Progress!" when improvements > declines
  - "ğŸ“‰ Less Active" when declines > improvements
  - "ğŸ“Š Steady Week" when tied
- Percentage change indicators per stat category

### Death Replay GUI
- New "ğŸ’€ Death History" button in PlayerStatsGui (slot 46)
- View last 100 deaths with detailed information
- Features for each death entry:
  - âš” Cause of death with smart icon selection
  - ğŸ“ Location (world, X, Y, Z coordinates)
  - â¤ Health at time of death
  - ğŸ“‰ Fall distance (if applicable)
  - ğŸ‘¥ Nearby players when death occurred
  - ğŸ¾ Nearby mobs when death occurred
  - ğŸ“¦ Inventory item count
- Smart death cause icons:
  - Mob-specific heads (Zombie, Skeleton, Creeper, etc.)
  - Environmental icons (Feather for falls, Lava bucket for fire, Water bucket for drowning)
  - Diamond sword for PvP kills
  - Void/portal icons for special deaths
- Relative timestamps ("5 minutes ago", "2 days ago")
- Pagination for players with many deaths (21 deaths per page)
- Works for viewing both your own and other players' death history

### Moments/Achievements History GUI
- New "ğŸ† Moments" button in PlayerStatsGui (slot 48)
- Browse all triggered moments with timestamps and visual badges
- Category-based icons:
  - â› Mining moments (diamond pickaxe)
  - ğŸ‰ Boss moments (dragon egg)
  - ğŸ’€ Death moments (skeleton skull)
  - ğŸ Item gain moments (chest)
  - â­ Other achievements (nether star)
- Features for each moment entry:
  - Moment type with formatted name
  - Relative timestamp ("5 minutes ago", "2 days ago")
  - Additional details in lore if available
- Pagination for players with many achievements (21 moments per page)
- Refresh button for real-time updates
- Works for viewing both your own and other players' moments

### Achievement Badges GUI
- New "ğŸ… Badges" button in PlayerStatsGui (slot 50)
- Over 35 achievement badges based on player statistics
- Five tier levels with visual distinction:
  - ğŸ¥‰ Bronze - Entry-level achievements
  - ğŸ¥ˆ Silver - Intermediate milestones
  - ğŸ¥‡ Gold - Significant accomplishments
  - ğŸ’ Diamond - Major achievements
  - ğŸŒŸ Legendary - Ultimate milestones
- Seven badge categories:
  - âš” Combat (kills, damage dealt, PvP)
  - ğŸ§­ Exploration (distance traveled, biomes discovered)
  - â› Mining (blocks broken)
  - ğŸ— Building (blocks placed, crafting)
  - ğŸ‘¥ Social (balanced activity)
  - ğŸ’€ Survival (death avoidance, damage tanked)
  - â± Dedication (playtime milestones)
- Features:
  - Badge collection summary with tier counts
  - Progress bar showing collection completion percentage
  - Filter by category
  - Toggle to show earned vs all badges
  - Unearned badges shown with requirements
  - Pagination for large badge collections
- Example badges:
  - "First Blood" (1 mob kill) - Bronze Combat
  - "Hunter" (100 mob kills) - Silver Combat
  - "Slayer" (1,000 mob kills) - Gold Combat
  - "Immortal" (0 deaths with 10+ hours) - Legendary Survival
  - "Legend" (1,000+ hours playtime) - Legendary Dedication

### Badge Summary in PlayerStatsGui
- New badge summary button showing earned badges count
- Displays highest tier badges (Legendary, Diamond, Gold counts)
- Quick access to full Badges GUI

### Navigation Enhancements
- Timeline Delta accessible from PlayerStatsGui via "Weekly Progress" button (slot 51)
- Death Replay accessible from PlayerStatsGui via "Death History" button (slot 46)
- Moments History accessible from PlayerStatsGui via "Moments" button (slot 48)
- Badges accessible from PlayerStatsGui via "Badges" button (slot 50)
- All GUIs include refresh and back navigation buttons

---

## ğŸ”§ Technical Notes

### Timeline Delta GUI
- New `TimelineDeltaGui` class in `de.nurrobin.smpstats.gui`
- Uses existing `StatsStorage.loadTimelineRange()` for data retrieval
- Calculates "last week" by subtracting 7-day range from 14-day range
- 11 new unit tests added

### Death Replay GUI
- New `DeathReplayGui` class in `de.nurrobin.smpstats.gui`
- New `StatsStorage.loadDeathReplaysForPlayer(UUID, int)` method
- Uses existing `DeathReplayEntry` record for data structure
- Smart icon mapping with priority ordering (mob names before "killed by")
- 19 new unit tests added

### Moments History GUI
- New `MomentsHistoryGui` class in `de.nurrobin.smpstats.gui`
- New `SMPStats.getMomentService()` method returning Optional<MomentService>
- Uses existing `MomentService.getPlayerMoments()` for data retrieval
- Category-based badge icons for visual distinction
- 12 new unit tests added

### Achievement Badges System
- New `AchievementBadge` record with tier and category enums
- New `BadgeEvaluator` class for badge definitions and evaluation
- New `BadgesGui` class for displaying badges with filtering
- Over 35 badge definitions covering all player statistics
- Functional interface `BadgeCondition` for flexible badge rules
- 33 new unit tests added (5 for AchievementBadge, 16 for BadgeEvaluator, 12 for BadgesGui)

---

## ğŸ“– Upgrade Notes

- No configuration or database changes required
- Features automatically available to all players with stats GUI access
- Timeline Delta requires timeline data to be present (built up over time from daily snapshots)
- Death Replay requires death tracking to be enabled (`death-replay.enabled: true` in config)
- Moments History requires moments system to be enabled
- Badges are automatically calculated from existing player statistics

---

## ğŸ—ºï¸ Roadmap

This release completes four items from the GUI Enhancement Roadmap (Milestone 2):
- âœ… Timeline Delta View (Medium feature)
- âœ… Death Replay GUI (Larger feature)
- âœ… Moments/Achievements Browser (Larger feature)
- âœ… Achievement Badges (Medium feature)
