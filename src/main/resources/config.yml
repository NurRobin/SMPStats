config_version: 6

api:
  enabled: true            # Enable HTTP API
  bind_address: "127.0.0.1"  # Bind address, usually 127.0.0.1 for local access (discord bots, etc), if you need external access use 0.0.0.0 or your server IP
  port: 8765               # API port
  api_key: "YouShouldChangeThisKey" # Set a secret key

dashboard:
  enabled: true            # Enable web dashboard
  bind_address: "0.0.0.0"  # Bind address for dashboard (0.0.0.0 for all interfaces)
  port: 8080               # Dashboard port (separate from API)
  
  # Public section - accessible without authentication
  public:
    enabled: true          # Allow public access to basic stats
    show_online_players: true
    show_leaderboards: true
    show_recent_moments: true
    show_server_stats: true
    
  # Admin section - requires authentication
  admin:
    enabled: true          # Enable admin panel
    password: "ChangeThisAdminPassword"  # Admin password
    session_timeout_minutes: 60
    show_health_metrics: true
    show_heatmaps: true
    show_social_data: true
    show_death_replays: true

tracking:
  movement: true      # Distance tracking (dimensions)
  blocks: true        # Blocks placed/broken
  kills: true         # Player/mob kills
  biomes: true        # Visited biomes
  crafting: true      # Crafted item count
  damage: true        # Damage dealt/taken
  consumption: true   # Items consumed

autosave_minutes: 5   # Autosave interval (minutes)

skills:
  # Weights drive the "skill score" calculation. Display only, no gameplay impact.
  mining:
    blocks_broken_weight: 0.05
  combat:
    player_kill_weight: 5.0
    mob_kill_weight: 2.0
    damage_dealt_weight: 0.02
  exploration:
    distance_weight: 0.01
    biomes_weight: 8.0
  builder:
    blocks_placed_weight: 0.05
  farmer:
    items_crafted_weight: 0.02
    items_consumed_weight: 0.01

moments:
  enabled: true
  flush_seconds: 10    # Checks open merge windows
  definitions:
    diamond_run:
      type: block_break
      title: "Diamanten Run"
      detail: "Diamanten gefunden: {count}"
      merge_seconds: 30
      materials: [DIAMOND_ORE, DEEPSLATE_DIAMOND_ORE]
    first_death:
      type: first_death
      title: "Erster Tod"
      detail: "{player} ist das erste Mal gestorben."
      first_only: true
    big_fall_death:
      type: death_fall
      title: "Big Fall Death"
      detail: "{player} fiel aus {fall} BlÃ¶cken."
      min_fall_distance: 50
    wither_kill:
      type: boss_kill
      entity_types: [WITHER]
      title: "Wither besiegt"
      detail: "{player} hat den Wither gelegt."
    netherite_gain:
      type: item_gain
      title: "Netherite!"
      detail: "{player} hat Netherite gefunden."
      materials: [NETHERITE_INGOT]
      merge_seconds: 10
    mlg_water:
      type: boss_kill
      entity_types: [MLG_WATER]
      title: "MLG!"
      detail: "{player} hat ein MLG geschafft."

heatmap:
  enabled: true
  flush_minutes: 5     # Write interval for heatmap bins (chunk-based)
  decay_half_life_hours: 0.0 # Half-life in hours for heatmap decay. 0.0 = disabled.
  hotspots:
    spawn:
      name: "Spawn"
      world: "world"
      min: {x: -100, z: -100}
      max: {x: 100, z: 100}

social:
  enabled: true
  sample_seconds: 5    # Interval for proximity samples (seconds)
  nearby_radius: 16    # Radius for shared actions (blocks)

timeline:
  enabled: true

death_replay:
  enabled: true
  include_inventory_items: true
  nearby_radius: 16   # Radius to include nearby entities (blocks)
  limit: 50           # Number of stored death reports
health:
  enabled: true
  sample_minutes: 5
  weights:
    chunk: 0.02
    entity: 0.005
    hopper: 0.2
    redstone: 0.1
  # Thresholds for chart color coding (green/yellow/orange/red)
  # For TPS: higher is better. For others: lower is better.
  thresholds:
    tps:
      good: 19.0        # Green: >= 19 TPS
      acceptable: 18.0  # Light green: >= 18 TPS
      warning: 15.0     # Yellow/Orange: >= 15 TPS
      critical: 10.0    # Red: < 10 TPS
    memory_percent:
      good: 50          # Green: <= 50%
      acceptable: 70    # Light green: <= 70%
      warning: 85       # Yellow/Orange: <= 85%
      critical: 95      # Red: > 95%
    chunks:
      good: 500         # Green: <= 500 chunks
      acceptable: 1000
      warning: 2000
      critical: 4000    # Red: > 4000 chunks
    entities:
      good: 500         # Green: <= 500 entities
      acceptable: 1500
      warning: 3000
      critical: 5000    # Red: > 5000 entities
    hoppers:
      good: 200         # Green: <= 200 hoppers
      acceptable: 500
      warning: 1000
      critical: 2000    # Red: > 2000 hoppers
    redstone:
      good: 500         # Green: <= 500 redstone
      acceptable: 1000
      warning: 2000
      critical: 5000    # Red: > 5000 redstone
    cost_index:
      good: 25          # Green: <= 25
      acceptable: 50
      warning: 75
      critical: 90      # Red: > 90

story:
  enabled: true
  interval_days: 7
  summary_hour: 6           # Server time (hour 0-23) to emit weekly summary
  webhook_url: ""           # Optional HTTP endpoint for JSON export
  top_limit: 5              # Top players included in summary
  recent_moments: 10        # Moments included with the summary
